# HTTPNetwork_인증

### 1) 인증이란

컴퓨터는 모니터 앞에 앉아 있는 사람이 누구인지 알 수 없고, 네트워크 저편에 누가 있는지 알 수 업습니다. 그래서 서버에 액세스하고 있는 사람이 누군지 알려면 [등록된 본인만이 알고 있는 정보] 나 [등록한 본인만이 가지고 있는 정보] 등으로 확인할 필요가 있습니다.

- 패스워드 : 본인만이 알고 있는 정보
- 바이오 매트릭스 : 지문이나 홍채 등 본인만이 가지고 있는 정보
- 원타임 토큰 : 본인만이 가지고 있는 기기 등에 표시되는 한 번 쓰고 버리는 정보
- 전자 증명서 : 본인만이 가지고 있는 증명서

<br>

### 2) BASIC 인증

BASIC 인증은 HTTP/1.0 에 구현된 인증 방식입니다. BASIC 인증은 도청된 경우에 유저 ID와 패스워드를 빼앗길 가능성이 있고, 일반 브라우저에서는 한 번 BASIC 인증을 하면 로그아웃 할 수 없다는 문제도 있어서 그다지 사용되고 있지는 않습니다.

​	2-1) BASIC 인증이 필요한 리소스에 리퀘스트가 있을 경우에는 서버는 상태 코드 401와 함께 인증의 방식(BASIC)과 Request-URI의 보호 공간을 식별하기 위한 문자열(realm)을 WWW_Authenticate 헤더 필드에 포함해서 리스폰스를 반환합니다.

​	2-2) 상태 코드 401을 받은 클라이언트는 BASIC 인증을 위해서 유저 ID, 패스워드를 `Base64` 형식으로 인코딩 해서 Authorization 헤더 필드에 포함해서 보냅니다. ( 암호화는 아니고 인코딩 ! )

​	2-3) 서버는 Authorization 헤더 필드를 포함한 리퀘스트를 수신해 인증 정보가 정확한지 판단합니다.

<br>

### 3) DIGEST 인증

DIGETS 인증은 HTTP/1.1 에서 BASIC 인증의 약점을 보안하며 구현된 인증 방식입니다. 챌린지 - 리스폰스 방식이 사용되고 있어서 패스워드를 있는 그대로 직접 보내지 않습니다. 다만, DIGEST 인증도 HTTPS의 클라이언트 인증 등과 비교하면 보안 등급이 낮고, 사용상의 문제와 위장 등의 문제 때문에 그다지 사용되고 있지는 않습니다.

​	3-1) DIGEST 인증이 필요한 리소스에 리퀘스트가 있을 경우에는 서버는 상태 코드 401와 함께 챌린지 코드(nonce) 와 문자열(realm)을 WWW_Authenticate 헤더 필드에 포함해서 리스폰스를 반환합니다.

​	3-2) 상태 코드 401을 받은 클라이언트는 DIGEST 인증을 위해 `username`, `realm`, `nonce`, `uri`, `response` 를 Authorization 헤더 필드에 포함해서 반환해야합니다. `username`은 지정된 `realm`에서 인증 가능한 사용자 이름이고, `uri`는 Resuet-URI에 있는 URI 를 의미하고, `response`는 Request-Digest 라고 불리는 패스워드 문자열을 MD5로 계산한 리스폰스 코드입니다. `nonce`, `realm`은 서버에서 받은 것을 사용합니다.

​	3-3) Authorization 헤더 필드를 포함한 리퀘스트를 받은 서버는 인증 정보가 정확한 것인지 아닌지를 판단합니다.

<br>

### 4) SSL 클라이언트 인증

유저 ID와 패스워드를 사용한 인증 방식은 이 두 가지 정보가 도난되었을 때에는 제 3자가 위장을 하는 경우가 있습니다. SSL 클라이언트 인증 방식은 HTTPS의 클라이언트 인증서를 이용한 인증 방식으로 제 3자의 위장도 막을 수 있습니다. 다만, 클라이언트 증명서를 이용하는데 비용이 필요하다는 단점이 있습니다.

​	4-1) 인증이 필요한 리소스의 리퀘스트가 있얼을 경우에는 서버는 클라이언트에게 클라이언트 증명서를 요구하는 `Certificate Request`라는 메시지를 송신합니다.

​	4-2)  유저는 송신하는 클라이언트 증명서를 선택하고, `Client Certificate` 라는 메시지를 송신합니다.

​	4-3) 서버는 클라이언트 증명서를 검증하며 검증 결과가 정확하다면 클라이언트의 공개키를 취득합니다. 그 이후에 HTTPS 에 의한 암호를 개시합니다.

SSL 클라이언트 인증 방식은 단독으로 사용되지 않고 `폼 베이스 인증`과 같이 2-factor 인증에서 사용됩니다.

<br>

### 5) 폼 베이스 인증

폼 베이스 인증은 HTTP 프로토콜로서 사양이 정의되어 있는 인증 방식이 아니라, 클라이언트가 서버 상의 웹 애플리케이션에 자격 정보를 송신하여 그 자격 정보의 검증 결과에 따라 인증을 하는 방식입니다.  대부분의 경우에는 ID와 패스워드를 입력해서 웹 애플리케이션 측에 송신하면 검증 결과를 토대로 검증 성공 여부를 결정합니다. ( 우리가 흔히 알고 있는 로그인 방식! )

따라서, 웹 애플리케이션에서 어떻게 구현해놓았느냐에 따라 안전할 수도 있고, 안전하지 않을 수도 있습니다.

> 참고!!
>
> 폼 베이스 인증 + SSL 클라이언트 인증 방식으로 보통 인증을 구현한다!